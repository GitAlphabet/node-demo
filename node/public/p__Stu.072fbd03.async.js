(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[950],{94373:function(V){V.exports={actionLink:"actionLink___2n-bU",menuWrapper:"menuWrapper___3S7gJ"}},13046:function(V,J,e){"use strict";e.r(J),e.d(J,{default:function(){return we}});var ln=e(57663),se=e(71577),F=e(3182),un=e(34792),N=e(48086),on=e(71194),K=e(57016),v=e(11849),dn=e(9715),g=e(82482),S=e(57337),le=e(94043),m=e.n(le),c=e(67294),ue=e(18172),ie=e(52628),oe=e.n(ie),de=e(78891),ce=e(22e3),a=e(85893),ve={x:"max-content"},me=function(n){var t=(0,c.useState)("middle"),r=(0,S.Z)(t,2),l=r[0],i=r[1],u=(0,c.useCallback)(function(p){return i(p)},[]);return(0,a.jsx)(ce.ZP,(0,v.Z)({scroll:ve,rowKey:"id",tableAlertRender:!1,rowSelection:!1,columnEmptyText:"--",size:l,onSizeChange:u},n))},fe=c.memo(me),he=fe,cn=e(59250),pe=e(13013),vn=e(48736),U=e(27049),mn=e(30887),Q=e(99210),ge=e(94184),Ze=e.n(ge),xe=e(39693),je=e.n(xe),ye=e(91175),Ie=e.n(ye),Fe=e(13217),Se=e.n(Fe),Ce=e(57254),Ae=e(94373),X=e.n(Ae),Te=[],$e=function(n){var t=n.actions,r=t===void 0?[]:t,l=(0,a.jsx)(Q.Z,{className:X().menuWrapper,children:r.map(function(i,u){return(0,a.jsx)(Q.Z.Item,{children:i},u)})});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.Z,{type:"vertical"}),(0,a.jsx)(pe.Z,{placement:"bottomCenter",overlay:l,trigger:["click"],children:(0,a.jsx)("a",{className:Ze()("ant-dropdown-link",X().actionLink),href:"#",children:(0,a.jsx)(Ce.Z,{})})})]})},Ne=function(n){var t=n.actions,r=t===void 0?Te:t,l=je()(r),i=Ie()(l),u=Se()(l),p=(0,c.useMemo)(function(){var o=u.length;switch(o){case 0:return null;case 1:return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.Z,{type:"vertical"}),u[0]]});default:return(0,a.jsx)($e,{actions:u})}},[u]);return(0,a.jsxs)(a.Fragment,{children:[i,p]})},De=Ne,Oe=e(93224),Ee=function(n){var t=n.children,r=(0,Oe.Z)(n,["children"]);return(0,a.jsx)(K.Z,(0,v.Z)((0,v.Z)({maskClosable:!1},r),{},{children:t}))},Be=c.memo(Ee),fn=e(74379),Le=e(38648),Re=e(11238),ze=e(2489),Me=e(6258),Pe=function(n){var t=n.response;return t||Le.default.error({description:"\u60A8\u7684\u7F51\u7EDC\u53D1\u751F\u5F02\u5E38\uFF0C\u65E0\u6CD5\u8FDE\u63A5\u670D\u52A1\u5668",message:"\u7F51\u7EDC\u5F02\u5E38"}),t},B=(0,Re.l7)({errorHandler:Pe,credentials:"include",timeout:5e3});B.interceptors.request.use(function(s,n){return{options:(0,v.Z)((0,v.Z)({},n),{},{headers:{Authorization:Me.Z.get("Admin_Authorization")}})}}),B.interceptors.response.use(function(){var s=(0,F.Z)(m().mark(function n(t){var r,l,i,u;return m().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,t.clone().json();case 3:r=o.sent,l=r||{},i=l.message,u=l.code,r&&!!u&&N.default.error(i),u===37&&ze.m8.push("/user/login"),o.next=11;break;case 9:o.prev=9,o.t0=o.catch(0);case 11:return o.abrupt("return",t);case 12:case"end":return o.stop()}},n,null,[[0,9]])}));return function(n){return s.apply(this,arguments)}}());var We=function(n){var t,r,l,i;return{data:n==null||(t=n.data)===null||t===void 0?void 0:t.list,total:n==null||(r=n.data)===null||r===void 0?void 0:r.total,success:n==null?void 0:n.success,pageSize:n==null||(l=n.data)===null||l===void 0?void 0:l.pageSize,current:n==null||(i=n.data)===null||i===void 0?void 0:i.pageNo}},L=B,He=function(n,t){var r=(0,c.useCallback)(function(){var l=(0,F.Z)(m().mark(function i(u){var p,o,j,y,A;return m().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return j=(0,v.Z)((0,v.Z)((0,v.Z)({},u),{},{pageNo:u.current},t==null?void 0:t(u)),{},{current:void 0}),h.next=3,n==null?void 0:n(j);case 3:if(y=h.sent,!(((p=y)===null||p===void 0||(o=p.data)===null||o===void 0?void 0:o.list.length)===0&&j.pageNo>1)){h.next=8;break}return h.next=7,n==null?void 0:n((0,v.Z)((0,v.Z)({},j),{},{pageNo:j.pageNo-1}));case 7:y=h.sent;case 8:return A=We(y),h.abrupt("return",Promise.resolve(A));case 10:case"end":return h.stop()}},i)}));return function(i){return l.apply(this,arguments)}}(),[n]);return r},be=He,Y=e(32059),D,Z;(function(s){s[s.Add=0]="Add",s[s.Edit=1]="Edit"})(Z||(Z={}));var Ge=(D={},(0,Y.Z)(D,Z.Add,"\u65B0\u589E"),(0,Y.Z)(D,Z.Edit,"\u7F16\u8F91"),D);function Ve(s){return R.apply(this,arguments)}function R(){return R=(0,F.Z)(m().mark(function s(n){return m().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",L("/api/stu/list",{params:n}));case 1:case"end":return r.stop()}},s)})),R.apply(this,arguments)}function Je(s){return z.apply(this,arguments)}function z(){return z=(0,F.Z)(m().mark(function s(n){return m().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",L("/api/stu/del",{params:n}));case 1:case"end":return r.stop()}},s)})),z.apply(this,arguments)}function k(s){return M.apply(this,arguments)}function M(){return M=(0,F.Z)(m().mark(function s(n){return m().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",L("/api/stu/update",{method:"POST",data:n}));case 1:case"end":return r.stop()}},s)})),M.apply(this,arguments)}function hn(s){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime.mark(function s(n){return _regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/stu/getDetail",{params:n}));case 1:case"end":return r.stop()}},s)})),P.apply(this,arguments)}var pn=e(77883),w=e(48835),gn=e(47673),O=e(32787),Zn=e(43358),q=e(90290),_=q.Z.Option,Ke=function(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.Z.Item,{name:"name",label:"\u59D3\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D"}],children:(0,a.jsx)(O.Z,{maxLength:15,placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D"})}),(0,a.jsx)(g.Z.Item,{name:"nickname",label:"\u5916\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5916\u53F7"}],children:(0,a.jsx)(O.Z,{maxLength:15,placeholder:"\u8BF7\u8F93\u5165\u5916\u53F7"})}),(0,a.jsx)(g.Z.Item,{name:"gender",label:"\u6027\u522B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6027\u522B"}],children:(0,a.jsxs)(q.Z,{placeholder:"\u8BF7\u9009\u62E9\u6027\u522B",children:[(0,a.jsx)(_,{value:0,children:"\u5973"}),(0,a.jsx)(_,{value:1,children:"\u7537"})]})}),(0,a.jsx)(g.Z.Item,{name:"age",label:"\u5E74\u9F84",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E74\u9F84"}],children:(0,a.jsx)(w.Z,{style:{width:"100%"},min:0,max:140,placeholder:"\u8BF7\u8F93\u5165\u5E74\u9F84"})}),(0,a.jsx)(g.Z.Item,{name:"pos_name",label:"\u804C\u4F4D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u804C\u4F4D"}],children:(0,a.jsx)(O.Z,{maxLength:15,placeholder:"\u8BF7\u8F93\u5165\u804C\u4F4D"})}),(0,a.jsx)(g.Z.Item,{name:"level",label:"\u804C\u7EA7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u804C\u7EA7"}],children:(0,a.jsx)(w.Z,{style:{width:"100%"},max:10,min:0,placeholder:"\u8BF7\u8F93\u5165\u804C\u7EA7"})}),(0,a.jsx)(g.Z.Item,{name:"hobbies",label:"\u7231\u597D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7231\u597D"}],children:(0,a.jsx)(O.Z.TextArea,{maxLength:50,rows:4,placeholder:"\u8BF7\u8F93\u5165\u7231\u597D"})})]})},Ue=Ke,Qe={index:{title:"\u5E8F\u53F7",dataIndex:"index",width:10,search:!1,fixed:"left",className:"nowrap",renderText:function(n,t,r,l){var i,u;return"".concat(((l==null||(i=l.pageInfo)===null||i===void 0?void 0:i.current)-1)*(l==null||(u=l.pageInfo)===null||u===void 0?void 0:u.pageSize)+r+1)}},name:{title:"\u59D3\u540D",dataIndex:"name",className:"nowrap"},nickname:{title:"\u5916\u53F7",search:!1,dataIndex:"nickname",className:"nowrap"},gender:{title:"\u6027\u522B",dataIndex:"gender",className:"nowrap",search:!1,renderText:function(n){var t={0:"\u5973",1:"\u7537"};return t[n]}},age:{title:"\u5E74\u9F84",search:!1,dataIndex:"age",className:"nowrap"},pos_name:{title:"\u804C\u4F4D",search:!1,dataIndex:"pos_name",className:"nowrap"},level:{title:"\u804C\u7EA7",search:!1,dataIndex:"level",className:"nowrap"},hobbies:{title:"\u7231\u597D",search:!1,dataIndex:"hobbies",className:"nowrap"},option:{title:"\u64CD\u4F5C",className:"nowrap",dataIndex:"option",search:!1,fixed:"right",width:10}},Xe=Qe,Ye=e(57119),ke=function(){var n=(0,c.useState)(!1),t=(0,S.Z)(n,2),r=t[0],l=t[1],i=(0,c.useState)(!1),u=(0,S.Z)(i,2),p=u[0],o=u[1],j=(0,c.useState)(Z.Add),y=(0,S.Z)(j,2),A=y[0],W=y[1],h=(0,c.useState)(void 0),ee=(0,S.Z)(h,2),qe=ee[0],ne=ee[1],E=(0,c.useRef)(),_e=g.Z.useForm(),en=(0,S.Z)(_e,1),T=en[0],H=function(){T.resetFields(),l(!1),ne(void 0)},nn=(0,c.useCallback)(function(f){l(!0),W(Z.Edit),ne(f.id),T.setFieldsValue((0,v.Z)({},f))},[]),an=(0,c.useCallback)(function(f){K.Z.confirm({title:"\u5220\u9664\u63D0\u793A",icon:(0,a.jsx)(Ye.Z,{}),content:"\u60A8\u786E\u8BA4\u5220\u9664\u8BE5\u6761\u6570\u636E\uFF1F",okType:"danger",onOk:function(){Je({id:f.id}).then(function(I){var x=I.code;if(!x){var C;N.default.success("\u5220\u9664\u6210\u529F!"),(C=E.current)===null||C===void 0||C.reload()}})}})},[]),rn=function(){var f=(0,F.Z)(m().mark(function $(){var I,x,C,ae,b,re,te,G;return m().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return o(!0),d.prev=1,d.next=4,T.validateFields();case 4:if(I=d.sent,x=(0,v.Z)({},I),A!==Z.Add){d.next=14;break}return d.next=9,k(x);case 9:C=d.sent,ae=C.code,ae||(N.default.success("\u6DFB\u52A0\u6210\u529F"),H(),(b=E.current)===null||b===void 0||b.reload()),d.next=20;break;case 14:return x.id=qe,d.next=17,k(x);case 17:re=d.sent,te=re.code,te||(N.default.success("\u7F16\u8F91\u6210\u529F"),H(),(G=E.current)===null||G===void 0||G.reload());case 20:o(!1),d.next=26;break;case 23:d.prev=23,d.t0=d.catch(1),o(!1);case 26:case"end":return d.stop()}},$,null,[[1,23]])}));return function(){return f.apply(this,arguments)}}(),tn=(0,c.useMemo)(function(){return oe()((0,ue.ZP)(Xe,function(f){f.option.render=function($,I){return(0,a.jsx)(De,{actions:[(0,a.jsx)("a",{onClick:function(){return nn(I)},children:"\u7F16\u8F91"}),(0,a.jsx)("a",{onClick:function(){return an(I)},children:"\u5220\u9664"})]})}}))},[]),sn=be(Ve,function(f){return(0,v.Z)({},f)});return(0,a.jsxs)(de.Oc,{children:[(0,a.jsx)(he,{actionRef:E,request:sn,columns:tn,toolBarRender:function(){return[(0,a.jsx)(se.Z,{type:"primary",onClick:function(){l(!0),W(Z.Add),T.resetFields()},children:"\u65B0\u589E"},"primary")]}}),(0,a.jsx)(Be,{title:Ge[A],visible:r,onOk:rn,onCancel:H,confirmLoading:p,children:(0,a.jsx)(g.Z,{form:T,children:(0,a.jsx)(Ue,{})})})]})},we=ke}}]);
